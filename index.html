<!DOCTYPE html>
<html lang="vi">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width,initial-scale=1" />
Â  <title>LÃª VÄƒn Linh (Cypher) â€” Profile</title>
Â  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
Â  <link rel="shortcut icon" href="https://scontent.fhan18-1.fna.fbcdn.net/v/t39.30808-6/557481975_122187746096569142_6613018808623610406_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=833d8c&_nc_ohc=pd93vMoULecQ7kNvwFdY8hT&_nc_oc=AdlmlfmUx7ViYSuDyxfqFGQUUUyJovbCmUNXXF2LR0QjQhUKTA2PxEmvE5uQrrytJtw&_nc_zt=23&_nc_ht=scontent.fhan18-1.fna&_nc_gid=XvYrDtqwNKIW7GSz0d8aCQ&oh=00_AffwcSnQZPTnX1284lJjcB2vJ6xZVeQhUXfZrBOpZ4pxXw&oe=6906B1FF">

Â  <style>
Â  Â  /* CSS Variables */
Â  Â  :root{
Â  Â  Â  --glass-bg: rgba(255,255,255,0.04);
Â  Â  Â  --card-bg: rgba(8,10,14,0.75);
Â  Â  Â  --accent: #00c4ff;
Â  Â  Â  --accent-2: #7c4dff;
Â  Â  Â  --text: #e9f1fb;
Â  Â  Â  --muted: #bfcbd8;
Â  Â  Â  --success: #4be27a;
Â  Â  Â  --toast-bg: rgba(0,0,0,0.75);
Â  Â  Â  --neon-strong: rgba(0,196,255,0.45);
Â  Â  }

Â  Â  /* Base Styles */
Â  Â  *{box-sizing:border-box;margin:0;padding:0}
Â  Â  html,body{height:100%}
Â  Â  body{
Â  Â  Â  font-family:'Poppins',sans-serif;
Â  Â  Â  background: linear-gradient(270deg,#0f0c1a,#081024);
Â  Â  Â  color:var(--text);
Â  Â  Â  -webkit-font-smoothing:antialiased;
Â  Â  Â  overflow-y:auto;
Â  Â  }

Â  Â  /* RGB Background & Overlay */
Â  Â  .rgb-layer{
Â  Â  Â  position:fixed;inset:0;z-index:0;
Â  Â  Â  background: linear-gradient(270deg,
Â  Â  Â  Â  rgba(124,77,255,0.4),
Â  Â  Â  Â  rgba(0,196,255,0.4),
Â  Â  Â  Â  rgba(0,255,170,0.35),
Â  Â  Â  Â  rgba(255,85,150,0.35));
Â  Â  Â  background-size:900% 900%;
Â  Â  Â  filter:blur(28px) saturate(180%);
Â  Â  Â  pointer-events:none;
Â  Â  Â  animation: rgbFlow 9s linear infinite;
Â  Â  Â  mix-blend-mode:screen;
Â  Â  Â  opacity:1;
Â  Â  }
Â  Â  @keyframes rgbFlow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
Â  Â  .dark-overlay{position:fixed;inset:0;z-index:0;background:linear-gradient(180deg,rgba(0,0,0,0.55),rgba(2,6,12,0.8));pointer-events:none;}

Â  Â  .wrap{position:relative;z-index:2;max-width:1000px;margin:36px auto;padding:24px}

Â  Â  /* HEADER */
Â  Â  header{display:flex;gap:20px;align-items:center;background:rgba(255,255,255,0.03);border-radius:14px;padding:28px;box-shadow:0 8px 36px rgba(2,6,12,0.7);backdrop-filter:blur(10px)}
Â  Â  .avatar{width:110px;height:110px;border-radius:50%;flex:0 0 110px;background-size:cover;background-position:center;box-shadow:0 0 25px rgba(0,196,255,0.3)}
Â  Â  header h1{font-size:1.6rem;color:var(--text);margin-bottom:6px}
Â  Â  header p{color:var(--muted);font-size:0.98rem}

Â  Â  /* GRID */
Â  Â  .grid{display:grid;grid-template-columns:1fr 360px;gap:20px;margin-top:20px}
Â  Â  .card{background:var(--card-bg);border-radius:12px;padding:20px;box-shadow:0 6px 30px rgba(2,6,12,0.6)}
Â  Â  .card h2{color:var(--accent);margin-bottom:10px}
Â  Â  .lead{color:var(--muted);line-height:1.6;margin-bottom:14px}
Â  Â  .services{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
Â  Â  .service-item{background:rgba(255,255,255,0.03);padding:8px 12px;border-radius:999px;font-size:0.92rem;color:var(--muted);border:1px solid rgba(255,255,255,0.05);transition:.2s}
Â  Â  .service-item:hover{color:var(--text);transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,196,255,0.1);border-color:var(--neon-strong)}

Â  Â  /* QR + PANEL (Banking/Social) */
Â  Â  .panel{background:rgba(255,255,255,0.03);border-radius:12px;padding:18px;display:flex;flex-direction:column;align-items:center;gap:12px}
Â  Â  .panel h3{color:var(--accent)}
Â  Â  .qr{width:190px;height:190px;border-radius:12px;border:3px solid rgba(255,255,255,0.05);box-shadow:0 0 40px rgba(0,196,255,0.25)}
Â  Â  .qr-wrap{position:relative}
Â  Â  .qr-wrap::after{content:"";position:absolute;inset:-12px;border-radius:16px;background:conic-gradient(from 0deg,rgba(0,196,255,0.4),rgba(124,77,255,0.35));filter:blur(16px);animation:spin 8s linear infinite}
Â  Â  @keyframes spin{to{transform:rotate(360deg)}}

Â  Â  .bank-info{width:100%;margin-top:8px}
Â  Â  .bank-row{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px;margin:6px 0;background:rgba(255,255,255,0.02);cursor:pointer;transition:.2s}
Â  Â  .bank-row:hover{background:rgba(0,196,255,0.08)}
Â  Â  .label{color:var(--muted);font-size:0.92rem}
Â  Â  .value{color:var(--text);font-weight:700}
Â  Â  .hint{font-size:0.82rem;color:var(--muted);margin-top:6px;text-align:center}

Â  Â  /* SOCIALS */
Â  Â  .links{display:flex;gap:10px;margin-top:12px}
Â  Â  .social{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.05);color:var(--text);text-decoration:none;transition:.2s;font-weight:600}
Â  Â  .social:hover{background:rgba(0,196,255,0.1);transform:translateY(-4px)}
Â  Â  .donate{margin-top:10px;padding:10px 16px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#041225;font-weight:700;text-decoration:none;text-align:center;transition:.2s}
Â  Â  .donate:hover{filter:brightness(1.1);transform:translateY(-2px)}

Â  Â  /* WEBSITE cards */
Â  Â  .webs{display:flex;flex-wrap:wrap;gap:12px;margin-top:12px}
Â  Â  .web-card{flex:0 0 calc(50% - 12px);background:rgba(255,255,255,0.02);border-radius:12px;padding:12px;display:flex;align-items:center;gap:10px;transition:.2s;border:1px solid rgba(255,255,255,0.05)}
Â  Â  .web-card:hover{transform:translateY(-6px);border-color:var(--neon-strong);box-shadow:0 0 20px rgba(0,196,255,0.08)}
Â  Â  .web-card img{width:40px;height:40px;border-radius:10px;box-shadow:0 0 12px rgba(0,196,255,0.3)}
Â  Â  .title{font-weight:700;color:var(--text)}
Â  Â  .desc{color:var(--muted);font-size:0.85rem}

Â  Â  /* TOAST */
Â  Â  .toast{position:fixed;right:20px;bottom:24px;padding:12px 16px;border-radius:10px;background:var(--toast-bg);color:var(--text);box-shadow:0 8px 30px rgba(0,0,0,0.6);display:none;font-weight:700}
Â  Â  .toast.show{display:flex;animation:fade .3s ease both}
Â  Â  @keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

Â  Â  /* Custom CSS cho Chatbot má»›i */
Â  Â  #chatBox {
Â  Â  Â  width: 100%;
Â  Â  Â  height: 250px;
Â  Â  Â  overflow-y: auto;
Â  Â  Â  background: rgba(0,0,0,0.4);
Â  Â  Â  border-radius: 8px;
Â  Â  Â  padding: 10px;
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 8px;
Â  Â  }
Â  Â  .user-msg, .bot-msg {
Â  Â  Â  padding: 8px 12px;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  max-width: 85%;
Â  Â  Â  font-size: 0.95rem;
Â  Â  }
Â  Â  .user-msg {
Â  Â  Â  background: var(--accent-2);
Â  Â  Â  color: var(--text);
Â  Â  Â  align-self: flex-end;
Â  Â  Â  border-bottom-right-radius: 4px;
Â  Â  }
Â  Â  .bot-msg {
Â  Â  Â  background: rgba(0,196,255,0.1);
Â  Â  Â  color: var(--text);
Â  Â  Â  align-self: flex-start;
Â  Â  }
Â  Â  #userInput {
Â  Â  Â  flex-grow: 1;
Â  Â  Â  padding: 10px;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  border: 1px solid var(--muted);
Â  Â  Â  background: rgba(0,0,0,0.5);
Â  Â  Â  color: var(--text);
Â  Â  }
Â  Â  #sendBtn {
Â  Â  Â  padding: 10px 15px;
Â  Â  Â  background: var(--accent);
Â  Â  Â  color: #041225;
Â  Â  Â  font-weight: 700;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: 0.2s;
Â  Â  }
Â  Â  #sendBtn:hover {
Â  Â  Â  filter: brightness(1.1);
Â  Â  }


Â  Â  /* Footer & Media Queries */
Â  Â  footer{margin-top:26px;text-align:center;color:var(--muted);font-size:0.9rem;padding-bottom:40px}
Â  Â  @media(max-width:980px){.grid{grid-template-columns:1fr}.panel{order:-1}.web-card{flex:0 0 100%}}
Â  </style>
</head>
<body>

Â  <div class="rgb-layer"></div>
Â  <div class="dark-overlay"></div>

Â  <div class="wrap">

Â  Â  <header>
Â  Â  Â  <div class="avatar" style="background-image:url('https://scontent.fhan18-1.fna.fbcdn.net/v/t39.30808-1/571658413_122191948142569142_1978419823035286129_n.jpg?stp=cp6_dst-jpg_s160x160_tt6&_nc_cat=106&ccb=1-7&_nc_sid=e99d92&_nc_ohc=ANoqFd1Bzr8Q7kNvwGebFtl&_nc_oc=AdnVPq-fARWXz0MW5plWyujBiywRAENDFvZbsvw4qqrD_v1Kzv679LNnIIqRWdfHab0&_nc_zt=24&_nc_ht=scontent.fhan18-1.fna&_nc_gid=EvlJLEkJS4ie69Ah9a7Tnw&oh=00_Afdw1B88bZmt-Oosuu8MQ2XuOKP1_9taRWLKBzDp4x2R_A&oe=69093542');"></div>
Â  Â  Â  <div class="meta">
Â  Â  Â  Â  <h1>LÃª VÄƒn Linh (Cypher)</h1>
Â  Â  Â  Â  <p>Admin website <a href="https://cypher234.shop" target="_blank" style="color:var(--accent);text-decoration:underline">Cypher234.shop</a></p>
Â  Â  Â  </div>
Â  Â  </header>

Â  Â  <div class="grid">

Â  Â  Â  <div class="card">
Â  Â  Â  Â  <h2>Giá»›i thiá»‡u báº£n thÃ¢n</h2>
Â  Â  Â  Â  <p class="lead">Xin chÃ o! TÃ´i lÃ  <strong>LÃª VÄƒn Linh</strong>, chuyÃªn cung cáº¥p cÃ¡c dá»‹ch vá»¥ game vÃ  thiáº¿t káº¿ web. Uy tÃ­n, an toÃ n vÃ  cháº¥t lÆ°á»£ng lÃ  Æ°u tiÃªn hÃ ng Ä‘áº§u.</p>

Â  Â  Â  Â  <h2>Dá»‹ch vá»¥</h2>
Â  Â  Â  Â  <div class="services">
Â  Â  Â  Â  Â  <span class="service-item">Táº¡o shop game siÃªu tá»‘c giÃ¡ ráº»</span>
Â  Â  Â  Â  Â  <span class="service-item">Cung cáº¥p dá»‹ch vá»¥ trá»±c tuyáº¿n Ä‘iá»‡n tá»­ giáº£i trÃ­</span>
Â  Â  Â  Â  Â  <span class="service-item">TÆ° váº¥n thÆ°Æ¡ng hiá»‡u cÃ¡ nhÃ¢n</span>
Â  Â  Â  Â  Â  <span class="service-item">Tá»‘i Æ°u SEO & Marketing</span>
Â  Â  Â  Â  Â  <span class="service-item">Cung cáº¥p tÃ i khoáº£n áº£o vá» game LiÃªn QuÃ¢n Mobile giáº£i trÃ­ trá»±c tuyáº¿n</span>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <h2 style="margin-top:18px">Thanh toÃ¡n nhanh (VietQR)</h2>
Â  Â  Â  Â  <div class="panel">
Â  Â  Â  Â  Â  <div class="qr-wrap"><img class="qr" src="https://img.vietqr.io/image/970407-19073015796012-compact.png?addInfo=LE%20VAN%20LINH"></div>

Â  Â  Â  Â  Â  <div class="bank-info">
Â  Â  Â  Â  Â  Â  <div class="bank-row" onclick="copyText('Techcombank')"><div class="label">NgÃ¢n hÃ ng</div><div class="value">Techcombank</div></div>
Â  Â  Â  Â  Â  Â  <div class="bank-row" onclick="copyText('19073015796012')"><div class="label">Sá»‘ tÃ i khoáº£n</div><div class="value">19073015796012</div></div>
Â  Â  Â  Â  Â  Â  <div class="bank-row" onclick="copyText('LÃŠ VÄ‚N LINH')"><div class="label">Chá»§ tÃ i khoáº£n</div><div class="value">LÃŠ VÄ‚N LINH</div></div>
Â  Â  Â  Â  Â  Â  <div class="hint">Nháº¥n vÃ o Ä‘á»ƒ sao chÃ©p thÃ´ng tin.</div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="links">
Â  Â  Â  Â  Â  Â  <a class="social" href="https://zalo.me/0366241530" target="_blank">Zalo Chat</a>
Â  Â  Â  Â  Â  Â  <a class="social" href="https://www.facebook.com/onessz26/" target="_blank">Facebook</a>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <a class="donate" href="https://vietqr.co/api/generate/tcb/19073015796012/LE%20VAN%20LINH" target="_blank">Donate / Há»— trá»£</a>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <aside class="panel">
Â  Â  Â  Â  <h3>ğŸŒ Trang Web Cá»§a TÃ´i</h3>
Â  Â  Â  Â  <div class="webs">
Â  Â  Â  Â  Â  <a class="web-card" href="https://cypher234.shop" target="_blank">
Â  Â  Â  Â  Â  Â  <img src="https://scontent.fhan18-1.fna.fbcdn.net/v/t39.30808-6/557481975_122187746096569142_6613018808623610406_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=833d8c&_nc_ohc=IzFaUQVgL6wQ7kNvwE_oYhk&_nc_oc=AdkQPUJ3VbjgpT1RXpILG-CbmsBvKq69wCYhHsgEJ1PIl5w1pmM1TqtEhHNA5ehxjC4&_nc_zt=23&_nc_ht=scontent.fhan18-1.fna&_nc_gid=lrNwn1zbnQfwyu--n5n8eQ&oh=00_AfeMlx0mXSJabdsz2RIqpgDDQZYggjf2bo04bZT4rGeBQw&oe=690A35FF">
Â  Â  Â  Â  Â  Â  <div><div class="title">Cypher234.shop</div><div class="desc">Random 9 cÃ¡ 100% ra 3s</div></div>
Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div style="width:100%; margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 20px;">
Â  Â  Â  Â  Â  Â  <button id="loginBtn" style="padding: 10px 15px; background: var(--accent); color: #041225; font-weight: 700; border: none; border-radius: 8px; cursor: pointer; width: 100%; margin-bottom: 15px;">ÄÄƒng nháº­p báº±ng Google</button>
Â  Â  Â  Â  Â  Â  <button id="logoutBtn" style="padding: 10px 15px; background: var(--accent-2); color: #fff; font-weight: 700; border: none; border-radius: 8px; cursor: pointer; width: 100%; display: none;">ÄÄƒng xuáº¥t</button>

Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div id="comment-section">
Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="color:var(--text); margin-bottom: 10px;">BÃ¬nh luáº­n</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <P>LÆ°u Ã : Má»—i ngÆ°á»i chá»‰ Ä‘Æ°á»£c bÃ¬nh luáº­n 1 láº§n khÃ´ng thá»ƒ sá»­a hay xÃ³a.</P>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="display: flex; gap: 8px; margin-bottom: 15px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="commentInput" placeholder="Nháº­p bÃ¬nh luáº­n..." style="flex-grow: 1; padding: 10px; border-radius: 6px; border: 1px solid var(--muted); background: rgba(0,0,0,0.5); color: var(--text);">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="sendComment" style="padding: 10px 15px; background: var(--accent-2); color: var(--text); font-weight: 600; border: none; border-radius: 6px; cursor: pointer;">Gá»­i</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <h4 style="color:var(--muted); margin-bottom: 8px;">Danh sÃ¡ch bÃ¬nh luáº­n:</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <ul id="commentList" style="list-style-type: none; padding: 0;"></ul>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
        
        <div style="width:100%; margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 20px;">
            <h3 style="color:var(--text); margin-bottom: 10px;">ğŸ’¬ Cypher AI Chatbot</h3>
            <div id="chatBox">
                <div class="bot-msg">Xin chÃ o! TÃ´i lÃ  Cypher AI. HÃ£y há»i tÃ´i vá» dá»‹ch vá»¥ cá»§a LÃª VÄƒn Linh nhÃ©!</div>
            </div>
            <div style="display: flex; gap: 8px; margin-top: 10px;">
                <input type="text" id="userInput" placeholder="Há»i tÃ´i má»™t Ä‘iá»u gÃ¬ Ä‘Ã³..." style="flex-grow: 1; padding: 10px; border-radius: 6px; border: 1px solid var(--muted); background: rgba(0,0,0,0.5); color: var(--text);">
                <button id="sendBtn">Gá»­i</button>
            </div>
        </div>
        Â  Â  Â  </aside>
Â  Â  </div>

Â  Â  <footer>Â© 2025 LÃŠ VÄ‚N LINH â€” Thiáº¿t káº¿ &amp; Há»— trá»£: Cypher</footer>
Â  </div>

Â  <div id="toast" class="toast"></div>

Â  <script>
Â  Â  /**
Â  Â  Â * Sao chÃ©p vÄƒn báº£n vÃ o clipboard vÃ  hiá»ƒn thá»‹ toast.
Â  Â  Â * @param {string} text - VÄƒn báº£n cáº§n sao chÃ©p.
Â  Â  Â */
Â  Â  function copyText(text){
Â  Â  Â  navigator.clipboard.writeText(text).then(()=>{
Â  Â  Â  Â  showToast('âœ… ÄÃ£ sao chÃ©p: ' + text);
Â  Â  Â  }).catch(err => {
Â  Â  Â  Â  console.error('KhÃ´ng thá»ƒ sao chÃ©p vÄƒn báº£n: ', err);
Â  Â  Â  Â  showToast('âŒ Lá»—i sao chÃ©p.');
Â  Â  Â  });
Â  Â  }

Â  Â  /**
Â  Â  Â * Hiá»ƒn thá»‹ thÃ´ng bÃ¡o Toast.
Â  Â  Â * @param {string} msg - Ná»™i dung thÃ´ng bÃ¡o.
Â  Â  Â */
Â  Â  function showToast(msg){
Â  Â  Â  const t=document.getElementById('toast');
Â  Â  Â  t.textContent=msg;
Â  Â  Â  t.classList.add('show');
Â  Â  Â  clearTimeout(window._tt);
Â  Â  Â  window._tt=setTimeout(()=>t.classList.remove('show'),2200);
Â  Â  }
Â  </script>

Â  Â  Â  <script type="module">
Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
Â  import {Â 
Â  Â  getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOutÂ 
Â  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
Â  import {Â 
Â  Â  getFirestore, collection, addDoc, getDocs, query, orderBy, whereÂ 
Â  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

Â  // === 1. Cáº¥u hÃ¬nh Firebase ===
Â  const firebaseConfig = {
Â  Â  apiKey: "AIzaSyCb3sLxKk8_l6UT3hfcy_JXOs33bQrWb60",
Â  Â  authDomain: "cypherdev-21611.firebaseapp.com",
Â  Â  projectId: "cypherdev-21611",
Â  Â  storageBucket: "cypherdev-21611.firebasestorage.app",
Â  Â  messagingSenderId: "108470103585",
Â  Â  appId: "1:108470103585:web:98b72f0513d2af55087d60",
Â  Â  measurementId: "G-CD1R2G24E2"
Â  };

Â  // === 2. Khá»Ÿi táº¡o Firebase ===
Â  const app = initializeApp(firebaseConfig);
Â  const auth = getAuth(app);
Â  const provider = new GoogleAuthProvider();
Â  const db = getFirestore(app);
Â  const commentsRef = collection(db, "comments");

Â  // === 3. Láº¥y pháº§n tá»­ HTML (BÃ¬nh luáº­n) ===
Â  const loginBtn = document.getElementById("loginBtn");
Â  const logoutBtn = document.getElementById("logoutBtn");
Â  const commentInput = document.getElementById("commentInput");
Â  const sendCommentBtn = document.getElementById("sendComment");
Â  const commentList = document.getElementById("commentList");

Â  let currentUser = null;

Â  // === 4. ÄÄƒng nháº­p Google ===
Â  loginBtn.addEventListener("click", async () => {
Â  Â  try {
Â  Â  Â  const result = await signInWithPopup(auth, provider);
Â  Â  Â  const user = result.user;
Â  Â  Â  showToast(`Xin chÃ o, ${user.displayName}!`);
Â  Â  } catch (error) {
Â  Â  Â  console.error("Lá»—i Ä‘Äƒng nháº­p:", error);
Â  Â  Â  showToast("âŒ ÄÄƒng nháº­p tháº¥t báº¡i.");
Â  Â  }
Â  });

Â  // === 5. ÄÄƒng xuáº¥t ===
Â  logoutBtn.addEventListener("click", async () => {
Â  Â  try {
Â  Â  Â  await signOut(auth);
Â  Â  Â  showToast("ğŸ‘‹ ÄÃ£ Ä‘Äƒng xuáº¥t thÃ nh cÃ´ng.");
Â  Â  } catch (error) {
Â  Â  Â  console.error("Lá»—i Ä‘Äƒng xuáº¥t:", error);
Â  Â  Â  showToast("âŒ Lá»—i khi Ä‘Äƒng xuáº¥t.");
Â  Â  }
Â  });

Â  // === 6. Theo dÃµi tráº¡ng thÃ¡i Ä‘Äƒng nháº­p ===
Â  onAuthStateChanged(auth, (user) => {
Â  Â  if (user) {
Â  Â  Â  currentUser = user;
Â  Â  Â  loginBtn.style.display = "none";
Â  Â  Â  logoutBtn.style.display = "block";
Â  Â  Â  sendCommentBtn.disabled = false;
Â  Â  Â  commentInput.disabled = false;
Â  Â  Â  loadComments();
Â  Â  } else {
Â  Â  Â  currentUser = null;
Â  Â  Â  loginBtn.style.display = "block";
Â  Â  Â  logoutBtn.style.display = "none";
Â  Â  Â  sendCommentBtn.disabled = true;
Â  Â  Â  commentInput.disabled = true;
Â  Â  Â  loadComments();
Â  Â  }
Â  });

Â // === 7. Gá»­i bÃ¬nh luáº­n (má»—i tÃ i khoáº£n chá»‰ 1 láº§n) ===
sendCommentBtn.addEventListener("click", async () => {
Â  if (!currentUser) {
Â  Â  showToast("âš ï¸ Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ bÃ¬nh luáº­n.");
Â  Â  return;
Â  }

Â  const text = commentInput.value.trim();
Â  if (!text) {
Â  Â  showToast("âš ï¸ BÃ¬nh luáº­n khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng.");
Â  Â  return;
Â  }

Â  sendCommentBtn.disabled = true;

Â  try {
Â  Â  // Kiá»ƒm tra xem user Ä‘Ã£ bÃ¬nh luáº­n chÆ°a
Â  Â  const q = query(commentsRef, where("uid", "==", currentUser.uid));
Â  Â  const snapshot = await getDocs(q);

Â  Â  if (!snapshot.empty) {
Â  Â  Â  showToast("âš ï¸ Má»—i tÃ i khoáº£n chá»‰ Ä‘Æ°á»£c bÃ¬nh luáº­n 1 láº§n.");
Â  Â  Â  commentInput.disabled = true;
Â  Â  Â  return;
Â  Â  }

Â  Â  await addDoc(commentsRef, {
Â  Â  Â  uid: currentUser.uid,
Â  Â  Â  username: currentUser.displayName || "áº¨n danh",
Â  Â  Â  photoURL: currentUser.photoURL || "",
Â  Â  Â  comment: text,
Â  Â  Â  timestamp: new Date()
Â  Â  });

Â  Â  commentInput.value = "";
Â  Â  commentInput.disabled = true;
Â  Â  showToast("âœ… BÃ¬nh luáº­n Ä‘Ã£ Ä‘Æ°á»£c gá»­i!");
Â  Â  loadComments();
Â  } catch (e) {
Â  Â  console.error("Lá»—i gá»­i bÃ¬nh luáº­n:", e);
Â  Â  showToast("âŒ Gá»­i bÃ¬nh luáº­n tháº¥t báº¡i.");
Â  } finally {
Â  Â  sendCommentBtn.disabled = true;
Â  }
});


Â  // === 8. Táº£i bÃ¬nh luáº­n ===
Â  async function loadComments() {
Â  Â  commentList.innerHTML = "";
Â  Â  try {
Â  Â  Â  const q = query(commentsRef, orderBy("timestamp", "desc"));
Â  Â  Â  const snapshot = await getDocs(q);
Â  Â  Â  snapshot.forEach((doc) => {
Â  Â  Â  Â  const data = doc.data();
Â  Â  Â  Â  const li = document.createElement("li");
Â  Â  Â  Â  li.innerHTML = `
Â  Â  Â  Â  Â  <div style="display:flex; align-items:center; gap:8px;">
Â  Â  Â  Â  Â  Â  <img src="${data.photoURL}" style="width:24px;height:24px;border-radius:50%;">
Â  Â  Â  Â  Â  Â  <strong style="color:var(--accent)">${data.username}</strong>Â 
Â  Â  Â  Â  Â  Â  <span style="color:var(--text)">${data.comment}</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <small style="color:var(--muted);display:block;text-align:right;">
Â  Â  Â  Â  Â  Â  ${data.timestamp.toDate().toLocaleTimeString("vi-VN")}Â 
Â  Â  Â  Â  Â  Â  ${data.timestamp.toDate().toLocaleDateString("vi-VN")}
Â  Â  Â  Â  Â  </small>`;
Â  Â  Â  Â  li.style.marginBottom = "10px";
Â  Â  Â  Â  li.style.borderBottom = "1px solid rgba(255,255,255,0.05)";
Â  Â  Â  Â  li.style.paddingBottom = "5px";
Â  Â  Â  Â  commentList.appendChild(li);
Â  Â  Â  });
Â  Â  } catch (e) {
Â  Â  Â  console.error("Lá»—i khi táº£i bÃ¬nh luáº­n:", e);
Â  Â  Â  commentList.innerHTML = "<li style='color:red;'>KhÃ´ng thá»ƒ táº£i bÃ¬nh luáº­n.</li>";
Â  Â  }
Â  }

Â  // === 9. Toast helper (dÃ¹ng chung cho cáº£ Firebase) ===
Â  function showToast(msg) {
Â  Â  const t = document.getElementById("toast");
Â  Â  t.textContent = msg;
Â  Â  t.classList.add("show");
Â  Â  clearTimeout(window._tt);
Â  Â  window._tt = setTimeout(() => t.classList.remove("show"), 2200);
Â  }
</script>

<script>
document.addEventListener("DOMContentLoaded", function() {
Â  const sendBtn = document.getElementById("sendBtn");
Â  const userInput = document.getElementById("userInput");
Â  const chatBox = document.getElementById("chatBox");

Â  // Äáº£m báº£o táº¥t cáº£ cÃ¡c pháº§n tá»­ tá»“n táº¡i trÆ°á»›c khi thÃªm event listener
Â  if (!sendBtn || !userInput || !chatBox) {
Â  Â  console.error("Lá»—i: KhÃ´ng tÃ¬m tháº¥y cÃ¡c pháº§n tá»­ Chatbot HTML.");
Â  Â  return;
Â  }

Â  async function sendMessage() {
Â  Â  const msg = userInput.value.trim();
Â  Â  if (!msg) return;

Â  Â  // Hiá»ƒn thá»‹ tin nháº¯n ngÆ°á»i dÃ¹ng
Â  Â  chatBox.innerHTML += `<div class="user-msg">${msg}</div>`;
Â  Â  userInput.value = "";
Â  Â  chatBox.scrollTop = chatBox.scrollHeight; // Cuá»™n xuá»‘ng

Â  Â  // Hiá»ƒn thá»‹ thÃ´ng bÃ¡o chá»
Â  Â  chatBox.innerHTML += `<div class="bot-msg" id="loading-msg">â³ Äang xá»­ lÃ½...</div>`;
Â  Â  chatBox.scrollTop = chatBox.scrollHeight;
Â  Â  sendBtn.disabled = true; // VÃ´ hiá»‡u hÃ³a nÃºt gá»­i khi Ä‘ang chá»

Â  Â  const loadingMsg = document.getElementById("loading-msg");

Â  Â  try {
Â  Â  Â  // Sá»­ dá»¥ng Ä‘Æ°á»ng dáº«n proxy local (phÃ¹ há»£p cho git/local project)
Â  Â  Â  const res = await fetch("./proxy.php", {
Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  body: JSON.stringify({ inputs: msg })
Â  Â  Â  });

Â  Â  Â  // XÃ³a thÃ´ng bÃ¡o chá»
Â  Â  Â  if(loadingMsg) loadingMsg.remove();
Â  Â  Â  
Â  Â  Â  const result = await res.json();
Â  Â  Â  const reply = (Array.isArray(result) && result[0]?.generated_text)
Â  Â  Â  Â  ? result[0].generated_text
Â  Â  Â  Â  : "âŒ Not Found. Lá»—i cáº¥u trÃºc pháº£n há»“i tá»« proxy.";

Â  Â  Â  // Hiá»ƒn thá»‹ pháº£n há»“i
Â  Â  Â  chatBox.innerHTML += `<div class="bot-msg">${reply}</div>`;
Â  Â  Â  chatBox.scrollTop = chatBox.scrollHeight;
Â  Â  } catch (err) {
Â  Â  Â  // XÃ³a thÃ´ng bÃ¡o chá» vÃ  bÃ¡o lá»—i
Â  Â  Â  if(loadingMsg) loadingMsg.remove();
Â  Â  Â  chatBox.innerHTML += `<div class="bot-msg" style="background: red;">âš ï¸ Káº¿t ná»‘i lá»—i: ${err.message}</div>`;
Â  Â  Â  chatBox.scrollTop = chatBox.scrollHeight;
Â  Â  Â  console.error("Lá»—i Chatbot:", err);
Â  Â  } finally {
Â  Â  Â  sendBtn.disabled = false; // Má»Ÿ láº¡i nÃºt gá»­i
Â  Â  }
Â  }

Â  sendBtn.addEventListener("click", sendMessage);
Â  userInput.addEventListener("keypress", (e) => { if (e.key === "Enter") sendMessage(); });
});
</script>
Â Â 
</body>
</html>
