<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>L√™ VƒÉn Linh (Cypher) ‚Äî Profile</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="shortcut icon" href="https://scontent.fhan18-1.fna.fbcdn.net/v/t39.30808-6/557481975_122187746096569142_6613018808623610406_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=833d8c&_nc_ohc=pd93vMoULecQ7kNvwFdY8hT&_nc_oc=AdlmlfmUx7ViYSuDyxfqFGQUUUyJovbCmUNXXF2LR0QjQhUKTA2PxEmvE5uQrrytJtw&_nc_zt=23&_nc_ht=scontent.fhan18-1.fna&_nc_gid=XvYrDtqwNKIW7GSz0d8aCQ&oh=00_AffwcSnQZPTnX1284lJjcB2vJ6xZVeQhUXfZrBOpZ4pxXw&oe=6906B1FF">

  <style>
    /* CSS Variables */
    :root{
      --glass-bg: rgba(255,255,255,0.04);
      --card-bg: rgba(8,10,14,0.75);
      --accent: #00c4ff;
      --accent-2: #7c4dff;
      --text: #e9f1fb;
      --muted: #bfcbd8;
      --success: #4be27a;
      --toast-bg: rgba(0,0,0,0.75);
      --neon-strong: rgba(0,196,255,0.45);
    }

    /* Base Styles */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Poppins',sans-serif;
      background: linear-gradient(270deg,#0f0c1a,#081024);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      overflow-y:auto;
    }

    /* RGB Background & Overlay */
    .rgb-layer{
      position:fixed;inset:0;z-index:0;
      background: linear-gradient(270deg,
        rgba(124,77,255,0.4),
        rgba(0,196,255,0.4),
        rgba(0,255,170,0.35),
        rgba(255,85,150,0.35));
      background-size:900% 900%;
      filter:blur(28px) saturate(180%);
      pointer-events:none;
      animation: rgbFlow 9s linear infinite;
      mix-blend-mode:screen;
      opacity:1;
    }
    @keyframes rgbFlow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .dark-overlay{position:fixed;inset:0;z-index:0;background:linear-gradient(180deg,rgba(0,0,0,0.55),rgba(2,6,12,0.8));pointer-events:none;}

    .wrap{position:relative;z-index:2;max-width:1000px;margin:36px auto;padding:24px}

    /* HEADER */
    header{display:flex;gap:20px;align-items:center;background:rgba(255,255,255,0.03);border-radius:14px;padding:28px;box-shadow:0 8px 36px rgba(2,6,12,0.7);backdrop-filter:blur(10px)}
    .avatar{width:110px;height:110px;border-radius:50%;flex:0 0 110px;background-size:cover;background-position:center;box-shadow:0 0 25px rgba(0,196,255,0.3)}
    header h1{font-size:1.6rem;color:var(--text);margin-bottom:6px}
    header p{color:var(--muted);font-size:0.98rem}

    /* GRID */
    .grid{display:grid;grid-template-columns:1fr 360px;gap:20px;margin-top:20px}
    .card{background:var(--card-bg);border-radius:12px;padding:20px;box-shadow:0 6px 30px rgba(2,6,12,0.6)}
    .card h2{color:var(--accent);margin-bottom:10px}
    .lead{color:var(--muted);line-height:1.6;margin-bottom:14px}
    .services{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .service-item{background:rgba(255,255,255,0.03);padding:8px 12px;border-radius:999px;font-size:0.92rem;color:var(--muted);border:1px solid rgba(255,255,255,0.05);transition:.2s}
    .service-item:hover{color:var(--text);transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,196,255,0.1);border-color:var(--neon-strong)}

    /* QR + PANEL (Banking/Social) */
    .panel{background:rgba(255,255,255,0.03);border-radius:12px;padding:18px;display:flex;flex-direction:column;align-items:center;gap:12px}
    .panel h3{color:var(--accent)}
    .qr{width:190px;height:190px;border-radius:12px;border:3px solid rgba(255,255,255,0.05);box-shadow:0 0 40px rgba(0,196,255,0.25)}
    .qr-wrap{position:relative}
    .qr-wrap::after{content:"";position:absolute;inset:-12px;border-radius:16px;background:conic-gradient(from 0deg,rgba(0,196,255,0.4),rgba(124,77,255,0.35));filter:blur(16px);animation:spin 8s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    .bank-info{width:100%;margin-top:8px}
    .bank-row{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px;margin:6px 0;background:rgba(255,255,255,0.02);cursor:pointer;transition:.2s}
    .bank-row:hover{background:rgba(0,196,255,0.08)}
    .label{color:var(--muted);font-size:0.92rem}
    .value{color:var(--text);font-weight:700}
    .hint{font-size:0.82rem;color:var(--muted);margin-top:6px;text-align:center}

    /* SOCIALS */
    .links{display:flex;gap:10px;margin-top:12px}
    .social{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.05);color:var(--text);text-decoration:none;transition:.2s;font-weight:600}
    .social:hover{background:rgba(0,196,255,0.1);transform:translateY(-4px)}
    .donate{margin-top:10px;padding:10px 16px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#041225;font-weight:700;text-decoration:none;text-align:center;transition:.2s}
    .donate:hover{filter:brightness(1.1);transform:translateY(-2px)}

    /* WEBSITE cards */
    .webs{display:flex;flex-wrap:wrap;gap:12px;margin-top:12px}
    .web-card{flex:0 0 calc(50% - 12px);background:rgba(255,255,255,0.02);border-radius:12px;padding:12px;display:flex;align-items:center;gap:10px;transition:.2s;border:1px solid rgba(255,255,255,0.05)}
    .web-card:hover{transform:translateY(-6px);border-color:var(--neon-strong);box-shadow:0 0 20px rgba(0,196,255,0.08)}
    .web-card img{width:40px;height:40px;border-radius:10px;box-shadow:0 0 12px rgba(0,196,255,0.3)}
    .title{font-weight:700;color:var(--text)}
    .desc{color:var(--muted);font-size:0.85rem}

    /* TOAST */
    .toast{position:fixed;right:20px;bottom:24px;padding:12px 16px;border-radius:10px;background:var(--toast-bg);color:var(--text);box-shadow:0 8px 30px rgba(0,0,0,0.6);display:none;font-weight:700}
    .toast.show{display:flex;animation:fade .3s ease both}
    @keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

    /* Footer & Media Queries */
    footer{margin-top:26px;text-align:center;color:var(--muted);font-size:0.9rem;padding-bottom:40px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}.panel{order:-1}.web-card{flex:0 0 100%}}
  </style>
</head>
<body>

  <div class="rgb-layer"></div>
  <div class="dark-overlay"></div>

  <div class="wrap">

    <header>
      <div class="avatar" style="background-image:url('https://scontent.fhan18-1.fna.fbcdn.net/v/t39.30808-1/571658413_122191948142569142_1978419823035286129_n.jpg?stp=cp6_dst-jpg_s160x160_tt6&_nc_cat=106&ccb=1-7&_nc_sid=e99d92&_nc_ohc=ANoqFd1Bzr8Q7kNvwGebFtl&_nc_oc=AdnVPq-fARWXz0MW5plWyujBiywRAENDFvZbsvw4qqrD_v1Kzv679LNnIIqRWdfHab0&_nc_zt=24&_nc_ht=scontent.fhan18-1.fna&_nc_gid=EvlJLEkJS4ie69Ah9a7Tnw&oh=00_Afdw1B88bZmt-Oosuu8MQ2XuOKP1_9taRWLKBzDp4x2R_A&oe=69093542');"></div>
      <div class="meta">
        <h1>L√™ VƒÉn Linh (Cypher)</h1>
        <p>Admin website <a href="https://cypher234.shop" target="_blank" style="color:var(--accent);text-decoration:underline">Cypher234.shop</a></p>
      </div>
    </header>

    <div class="grid">

      <div class="card">
        <h2>Gi·ªõi thi·ªáu b·∫£n th√¢n</h2>
        <p class="lead">Xin ch√†o! T√¥i l√† <strong>L√™ VƒÉn Linh</strong>, chuy√™n cung c·∫•p c√°c d·ªãch v·ª• game v√† thi·∫øt k·∫ø web. Uy t√≠n, an to√†n v√† ch·∫•t l∆∞·ª£ng l√† ∆∞u ti√™n h√†ng ƒë·∫ßu.</p>

        <h2>D·ªãch v·ª•</h2>
        <div class="services">
          <span class="service-item">T·∫°o shop game si√™u t·ªëc gi√° r·∫ª</span>
          <span class="service-item">Cung c·∫•p d·ªãch v·ª• tr·ª±c tuy·∫øn ƒëi·ªán t·ª≠ gi·∫£i tr√≠</span>
          <span class="service-item">T∆∞ v·∫•n th∆∞∆°ng hi·ªáu c√° nh√¢n</span>
          <span class="service-item">T·ªëi ∆∞u SEO & Marketing</span>
          <span class="service-item">Cung c·∫•p t√†i kho·∫£n ·∫£o v·ªÅ game Li√™n Qu√¢n Mobile gi·∫£i tr√≠ tr·ª±c tuy·∫øn</span>
        </div>

        <h2 style="margin-top:18px">Thanh to√°n nhanh (VietQR)</h2>
        <div class="panel">
          <div class="qr-wrap"><img class="qr" src="https://img.vietqr.io/image/970407-19073015796012-compact.png?addInfo=LE%20VAN%20LINH"></div>

          <div class="bank-info">
            <div class="bank-row" onclick="copyText('Techcombank')"><div class="label">Ng√¢n h√†ng</div><div class="value">Techcombank</div></div>
            <div class="bank-row" onclick="copyText('19073015796012')"><div class="label">S·ªë t√†i kho·∫£n</div><div class="value">19073015796012</div></div>
            <div class="bank-row" onclick="copyText('L√ä VƒÇN LINH')"><div class="label">Ch·ªß t√†i kho·∫£n</div><div class="value">L√ä VƒÇN LINH</div></div>
            <div class="hint">Nh·∫•n v√†o ƒë·ªÉ sao ch√©p th√¥ng tin.</div>
          </div>

          <div class="links">
            <a class="social" href="https://zalo.me/0366241530" target="_blank">Zalo Chat</a>
            <a class="social" href="https://www.facebook.com/onessz26/" target="_blank">Facebook</a>
          </div>

          <a class="donate" href="https://vietqr.co/api/generate/tcb/19073015796012/LE%20VAN%20LINH" target="_blank">Donate / H·ªó tr·ª£</a>
        </div>
      </div>

      <aside class="panel">
        <h3>üåê Trang Web C·ªßa T√¥i</h3>
        <div class="webs">
          <a class="web-card" href="https://cypher234.shop" target="_blank">
            <img src="https://scontent.fhan18-1.fna.fbcdn.net/v/t39.30808-6/557481975_122187746096569142_6613018808623610406_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeF2sOtunuf9a7u3B6jvER3SRfIn8hnGV-ZF8ifyGcZX5uSK7Lr_oXh85e3bPFRWq_8QVqFnOjyn6Q7qL_0nZn5A&_nc_ohc=gD4eyfl0mSYQ7kNvwF_oWnX&_nc_oc=AdnSccq82EIzKfk64IltRXmFrsaxth3y-tgnl1I52xozy_xeARK-AIpy5vkBcGHPVeI&_nc_zt=23&_nc_ht=scontent.fhan18-1.fna&_nc_gid=N0r4PeZ2w5ROSMJEth139g&oh=00_AffUgtIknGWR3KWxXL7PHbW4IUD8VJMXbcqerfHnXZGP0A&oe=69040EFF">
            <div><div class="title">Cypher234.shop</div><div class="desc">Random 9 c√° 100% ra 3s</div></div>
          </a>
        </div>
        
        <div style="width:100%; margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 20px;">
            <button id="loginBtn" style="padding: 10px 15px; background: var(--accent); color: #041225; font-weight: 700; border: none; border-radius: 8px; cursor: pointer; width: 100%; margin-bottom: 15px;">ƒêƒÉng nh·∫≠p b·∫±ng Google</button>
            <button id="logoutBtn" style="padding: 10px 15px; background: var(--accent-2); color: #fff; font-weight: 700; border: none; border-radius: 8px; cursor: pointer; width: 100%; display: none;">ƒêƒÉng xu·∫•t</button>

       
            
            <div id="comment-section">
                <h3 style="color:var(--text); margin-bottom: 10px;">B√¨nh lu·∫≠n</h3>
                <P>L∆∞u √ù : M·ªói ng∆∞·ªùi ch·ªâ ƒë∆∞·ª£c b√¨nh lu·∫≠n 1 l·∫ßn kh√¥ng th·ªÉ s·ª≠a hay x√≥a.</P>
                <div style="display: flex; gap: 8px; margin-bottom: 15px;">
                    <input type="text" id="commentInput" placeholder="Nh·∫≠p b√¨nh lu·∫≠n..." style="flex-grow: 1; padding: 10px; border-radius: 6px; border: 1px solid var(--muted); background: rgba(0,0,0,0.5); color: var(--text);">
                    <button id="sendComment" style="padding: 10px 15px; background: var(--accent-2); color: var(--text); font-weight: 600; border: none; border-radius: 6px; cursor: pointer;">G·ª≠i</button>
                </div>

                <h4 style="color:var(--muted); margin-bottom: 8px;">Danh s√°ch b√¨nh lu·∫≠n:</h4>
                <ul id="commentList" style="list-style-type: none; padding: 0;"></ul>
            </div>
        </div>
      </aside>
    </div>

    <footer>¬© 2025 L√ä VƒÇN LINH ‚Äî Thi·∫øt k·∫ø &amp; H·ªó tr·ª£: Cypher</footer>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    /**
     * Sao ch√©p vƒÉn b·∫£n v√†o clipboard v√† hi·ªÉn th·ªã toast.
     * @param {string} text - VƒÉn b·∫£n c·∫ßn sao ch√©p.
     */
    function copyText(text){
      navigator.clipboard.writeText(text).then(()=>{
        showToast('‚úÖ ƒê√£ sao ch√©p: ' + text);
      }).catch(err => {
        console.error('Kh√¥ng th·ªÉ sao ch√©p vƒÉn b·∫£n: ', err);
        showToast('‚ùå L·ªói sao ch√©p.');
      });
    }

    /**
     * Hi·ªÉn th·ªã th√¥ng b√°o Toast.
     * @param {string} msg - N·ªôi dung th√¥ng b√°o.
     */
    function showToast(msg){
      const t=document.getElementById('toast');
      t.textContent=msg;
      t.classList.add('show');
      clearTimeout(window._tt);
      window._tt=setTimeout(()=>t.classList.remove('show'),2200);
    }
  </script>

    <!-- ‚úÖ Firebase chu·∫©n: D√°n to√†n b·ªô ph·∫ßn n√†y v√†o cu·ªëi <body> -->
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { 
    getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut 
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { 
    getFirestore, collection, addDoc, getDocs, query, orderBy, where 
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  // === 1. C·∫•u h√¨nh Firebase ===
  const firebaseConfig = {
    apiKey: "AIzaSyCb3sLxKk8_l6UT3hfcy_JXOs33bQrWb60",
    authDomain: "cypherdev-21611.firebaseapp.com",
    projectId: "cypherdev-21611",
    storageBucket: "cypherdev-21611.firebasestorage.app",
    messagingSenderId: "108470103585",
    appId: "1:108470103585:web:98b72f0513d2af55087d60",
    measurementId: "G-CD1R2G24E2"
  };

  // === 2. Kh·ªüi t·∫°o Firebase ===
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();
  const db = getFirestore(app);
  const commentsRef = collection(db, "comments");

  // === 3. L·∫•y ph·∫ßn t·ª≠ HTML ===
  const loginBtn = document.getElementById("loginBtn");
  const logoutBtn = document.getElementById("logoutBtn");
  const commentInput = document.getElementById("commentInput");
  const sendCommentBtn = document.getElementById("sendComment");
  const commentList = document.getElementById("commentList");

  let currentUser = null;

  // === 4. ƒêƒÉng nh·∫≠p Google ===
  loginBtn.addEventListener("click", async () => {
    try {
      const result = await signInWithPopup(auth, provider);
      const user = result.user;
      showToast(`Xin ch√†o, ${user.displayName}!`);
    } catch (error) {
      console.error("L·ªói ƒëƒÉng nh·∫≠p:", error);
      showToast("‚ùå ƒêƒÉng nh·∫≠p th·∫•t b·∫°i.");
    }
  });

  // === 5. ƒêƒÉng xu·∫•t ===
  logoutBtn.addEventListener("click", async () => {
    try {
      await signOut(auth);
      showToast("üëã ƒê√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng.");
    } catch (error) {
      console.error("L·ªói ƒëƒÉng xu·∫•t:", error);
      showToast("‚ùå L·ªói khi ƒëƒÉng xu·∫•t.");
    }
  });

  // === 6. Theo d√µi tr·∫°ng th√°i ƒëƒÉng nh·∫≠p ===
  onAuthStateChanged(auth, (user) => {
    if (user) {
      currentUser = user;
      loginBtn.style.display = "none";
      logoutBtn.style.display = "block";
      sendCommentBtn.disabled = false;
      commentInput.disabled = false;
      loadComments();
    } else {
      currentUser = null;
      loginBtn.style.display = "block";
      logoutBtn.style.display = "none";
      sendCommentBtn.disabled = true;
      commentInput.disabled = true;
      loadComments();
    }
  });

 // === 7. G·ª≠i b√¨nh lu·∫≠n (m·ªói t√†i kho·∫£n ch·ªâ 1 l·∫ßn) ===
sendCommentBtn.addEventListener("click", async () => {
  if (!currentUser) {
    showToast("‚ö†Ô∏è Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ b√¨nh lu·∫≠n.");
    return;
  }

  const text = commentInput.value.trim();
  if (!text) {
    showToast("‚ö†Ô∏è B√¨nh lu·∫≠n kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng.");
    return;
  }

  sendCommentBtn.disabled = true;

  try {
    // Ki·ªÉm tra xem user ƒë√£ b√¨nh lu·∫≠n ch∆∞a
    const q = query(commentsRef, where("uid", "==", currentUser.uid));
    const snapshot = await getDocs(q);

    if (!snapshot.empty) {
      showToast("‚ö†Ô∏è M·ªói t√†i kho·∫£n ch·ªâ ƒë∆∞·ª£c b√¨nh lu·∫≠n 1 l·∫ßn.");
      commentInput.disabled = true;
      return;
    }

    await addDoc(commentsRef, {
      uid: currentUser.uid,
      username: currentUser.displayName || "·∫®n danh",
      photoURL: currentUser.photoURL || "",
      comment: text,
      timestamp: new Date()
    });

    commentInput.value = "";
    commentInput.disabled = true;
    showToast("‚úÖ B√¨nh lu·∫≠n ƒë√£ ƒë∆∞·ª£c g·ª≠i!");
    loadComments();
  } catch (e) {
    console.error("L·ªói g·ª≠i b√¨nh lu·∫≠n:", e);
    showToast("‚ùå G·ª≠i b√¨nh lu·∫≠n th·∫•t b·∫°i.");
  } finally {
    sendCommentBtn.disabled = true;
  }
});


  // === 8. T·∫£i b√¨nh lu·∫≠n ===
  async function loadComments() {
    commentList.innerHTML = "";
    try {
      const q = query(commentsRef, orderBy("timestamp", "desc"));
      const snapshot = await getDocs(q);
      snapshot.forEach((doc) => {
        const data = doc.data();
        const li = document.createElement("li");
        li.innerHTML = `
          <div style="display:flex; align-items:center; gap:8px;">
            <img src="${data.photoURL}" style="width:24px;height:24px;border-radius:50%;">
            <strong style="color:var(--accent)">${data.username}</strong> 
            <span style="color:var(--text)">${data.comment}</span>
          </div>
          <small style="color:var(--muted);display:block;text-align:right;">
            ${data.timestamp.toDate().toLocaleTimeString("vi-VN")} 
            ${data.timestamp.toDate().toLocaleDateString("vi-VN")}
          </small>`;
        li.style.marginBottom = "10px";
        li.style.borderBottom = "1px solid rgba(255,255,255,0.05)";
        li.style.paddingBottom = "5px";
        commentList.appendChild(li);
      });
    } catch (e) {
      console.error("L·ªói khi t·∫£i b√¨nh lu·∫≠n:", e);
      commentList.innerHTML = "<li style='color:red;'>Kh√¥ng th·ªÉ t·∫£i b√¨nh lu·∫≠n.</li>";
    }
  }

  // === 9. Toast helper ===
  function showToast(msg) {
    const t = document.getElementById("toast");
    t.textContent = msg;
    t.classList.add("show");
    clearTimeout(window._tt);
    window._tt = setTimeout(() => t.classList.remove("show"), 2200);
  }
</script>
  <script>
  async function sendMessage() {
    const userInput = document.getElementById("userInput").value;
    if (!userInput) return;

    const chatBox = document.getElementById("cypher-chatbox");
    chatBox.innerHTML += `<div class="user-msg">${userInput}</div>`;

    const response = await fetch("https://cypher289.shop/public/proxy.php", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ inputs: userMessage })
    });


    const result = await response.json();
    let reply = "Xin l·ªói, m√¨nh kh√¥ng hi·ªÉu.";
    if (Array.isArray(result) && result[0]?.generated_text) {
      reply = result[0].generated_text;
    }

    chatBox.innerHTML += `<div class="bot-msg">${reply}</div>`;
    document.getElementById("userInput").value = "";
    chatBox.scrollTop = chatBox.scrollHeight; // T·ª± ƒë·ªông cu·ªôn xu·ªëng tin nh·∫Øn m·ªõi
  }
</script>

<!-- ===== Cypher AI Chatbot (clean, single instance) ===== -->
<style>
  /* Chat toggle & box */
  #cypher-toggle {
    position: fixed; bottom: 24px; right: 24px;
    width:56px; height:56px; border-radius:50%;
    background: linear-gradient(135deg,#00c6ff,#0072ff);
    color:#fff; border:none; z-index:10050; cursor:pointer; box-shadow:0 8px 30px rgba(0,0,0,0.35);
    display:flex; align-items:center; justify-content:center; font-size:22px;
  }
  #cypher-panel {
    position: fixed; bottom: 96px; right: 24px; width:360px; max-height:520px;
    background:#0b1220; border-radius:14px; box-shadow:0 12px 40px rgba(0,0,0,0.6);
    display:none; flex-direction:column; overflow:hidden; z-index:10040;
    border:1px solid rgba(0,198,255,0.12);
  }
  #cypher-header { padding:12px 14px; font-weight:700; color:#fff; background:linear-gradient(90deg,#00c6ff22,#0072ff22); }
  #cypher-messages { flex:1; padding:12px; overflow-y:auto; font-size:14px; color:#e6eef8; background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent); }
  .cy-msg { display:inline-block; padding:8px 12px; border-radius:12px; margin:6px 0; max-width:80%; word-wrap:break-word; }
  .cy-user { background:linear-gradient(90deg,#0072ff,#00c6ff); color:#001827; align-self:flex-end; float:right; border-bottom-right-radius:4px; }
  .cy-bot { background:#0f1720; color:#e6eef8; align-self:flex-start; float:left; }
  #cypher-input { display:flex; gap:8px; padding:10px; border-top:1px solid rgba(255,255,255,0.02); background:linear-gradient(180deg, rgba(0,0,0,0.02), transparent); }
  #cypher-input input { flex:1; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); background:#07101a; color:#fff; outline:none; }
  #cypher-input button { padding:10px 14px; border-radius:8px; border:none; background:#00c6ff; color:#012; cursor:pointer; font-weight:700; }
  /* clear floats */
  .clearfix::after { content:""; display:block; clear:both; }
</style>

<button id="cypher-toggle" aria-label="Open chat">üí¨</button>

<div id="cypher-panel" role="dialog" aria-label="Cypher AI Chat">
  <div id="cypher-header">ü§ñ Cypher AI ‚Äî H·ªó tr·ª£</div>
  <div id="cypher-messages" class="clearfix" aria-live="polite"></div>
  <div id="cypher-input">
    <input id="cypher-text" placeholder="Vi·∫øt g√¨ ƒë√≥... (Ti·∫øng Vi·ªát ·ªïn n·∫øu model h·ªó tr·ª£)" />
    <button id="cypher-send">G·ª≠i</button>
  </div>
</div>

<script>
(function(){
  // CH·ªà CH·ªàNH ƒê∆Ø·ªúNG D·∫™N PROXY N√ÄY n·∫øu host c·ªßa b·∫°n kh√°c
  const PROXY_URL = "https://cypher234.shop/proxy.php";

  const toggle = document.getElementById("cypher-toggle");
  const panel = document.getElementById("cypher-panel");
  const msgBox = document.getElementById("cypher-messages");
  const input = document.getElementById("cypher-text");
  const sendBtn = document.getElementById("cypher-send");

  // Toggle open/close
  toggle.addEventListener("click", () => {
    panel.style.display = panel.style.display === "flex" ? "none" : "flex";
    if (panel.style.display === "flex") input.focus();
  });

  // Send on click or Enter
  sendBtn.addEventListener("click", sendMessage);
  input.addEventListener("keypress", (e) => { if (e.key === "Enter") sendMessage(); });

  // Utility: append message
  function append(text, cls) {
    const d = document.createElement("div");
    d.className = "cy-msg " + (cls || "cy-bot");
    d.innerText = text;
    msgBox.appendChild(d);
    msgBox.scrollTop = msgBox.scrollHeight;
  }

  // Send message handler
  let isWaiting = false;
  async function sendMessage() {
    if (isWaiting) return; // tr√°nh g·ª≠i nhi·ªÅu l·∫ßn
    const t = input.value.trim();
    if (!t) return;
    append(t, "cy-user");
    input.value = "";
    append("‚è≥ ƒêang x·ª≠ l√Ω...", "cy-bot");
    isWaiting = true;

    try {
      const res = await fetch(PROXY_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ inputs: t })
      });

      // N·∫øu server tr·∫£ v·ªÅ text not JSON -> throw
      const text = await res.text();
      let data;
      try { data = JSON.parse(text); } catch(e) { 
        // n·∫øu l√† plain text tr·∫£ v·ªÅ t·ª´ HF (v√≠ d·ª• model tr·∫£ JSON array string) -> c·ªë g·∫Øng parse fallback
        try { data = JSON.parse(text.replace(/\n/g,'')); } catch(e2) { data = text; }
      }

      // x√≥a d√≤ng 'ƒëang x·ª≠ l√Ω...'
      const statusNodes = Array.from(msgBox.querySelectorAll(".cy-bot")).filter(n => n.innerText.includes("ƒêang x·ª≠ l√Ω"));
      statusNodes.forEach(n => n.remove());

      // x·ª≠ l√Ω data c√≥ c·∫•u tr√∫c m·∫£ng t·ª´ HF
      let reply = "Xin l·ªói, kh√¥ng c√≥ ph·∫£n h·ªìi.";
      if (Array.isArray(data) && data[0] && (data[0].generated_text || data[0].generated_text === "")) {
        reply = data[0].generated_text || " ";
      } else if (data && typeof data === "object" && data.error) {
        reply = "L·ªói: " + data.error;
      } else if (typeof data === "string") {
        // n·∫øu proxy tr·∫£ plain text JSON ho·∫∑c plain text
        reply = data;
      }

      append(reply, "cy-bot");
    } catch (err) {
      // x√≥a 'ƒëang x·ª≠ l√Ω...' v√† b√°o l·ªói
      const statusNodes = Array.from(msgBox.querySelectorAll(".cy-bot")).filter(n => n.innerText.includes("ƒêang x·ª≠ l√Ω"));
      statusNodes.forEach(n => n.remove());
      append("‚ö†Ô∏è L·ªói k·∫øt n·ªëi server. M·ªü console Network ƒë·ªÉ xem chi ti·∫øt.", "cy-bot");
      console.error("Chat proxy error:", err);
    } finally {
      isWaiting = false;
    }
  }

  // Accessibility: close panel on Escape
  document.addEventListener("keydown", e => { if (e.key === "Escape") panel.style.display = "none"; });

})();
</script>
<!-- ===== End Cypher AI Chatbot ===== -->



<script>
const chatBox = document.getElementById("chat-box");
const chatToggle = document.getElementById("chat-toggle");
const sendBtn = document.getElementById("sendBtn");
const input = document.getElementById("msgInput");
const messages = document.getElementById("chat-messages");

const proxyURL = "https://cypher234.shop/proxy.php";

chatToggle.onclick = () => {
  chatBox.style.display = chatBox.style.display === "none" ? "flex" : "none";
};

sendBtn.onclick = sendMessage;
input.addEventListener("keypress", e => { if (e.key === "Enter") sendMessage(); });

async function sendMessage() {
  const msg = input.value.trim();
  if (!msg) return;

  appendMessage("user", msg);
  input.value = "";

  try {
    const res = await fetch(proxyURL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ inputs: msg })
    });
    const data = await res.json();
    const reply = data[0]?.generated_text || "CypherBot ƒëang b·∫≠n, th·ª≠ l·∫°i nh√©!";
    appendMessage("bot", reply);
  } catch (err) {
    appendMessage("bot", "‚ö†Ô∏è L·ªói k·∫øt n·ªëi m√°y ch·ªß!");
  }
}

function appendMessage(sender, text) {
  const div = document.createElement("div");
  div.className = `msg ${sender}`;
  div.textContent = text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}
</script>
<!-- üí¨ End Cypher AI Chatbot -->




  
</body>
</html>
